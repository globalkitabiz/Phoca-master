# Phoca (Vocapic) í”„ë¡œì íŠ¸ ì •ë³´

> **AI ê¸°ë°˜ ì˜ì–´ ì–´íœ˜ í•™ìŠµ ì„œë¹„ìŠ¤** - ì‚¬ì§„ìœ¼ë¡œ ë‹¨ì–´ë¥¼ ë°°ìš°ëŠ” êµìœ¡ í”Œë«í¼

---

## ë°°í¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ë¸Œë¼ìš°ì €                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Pages (Frontend)                      â”‚
â”‚                 https://phoca-master.pages.dev                      â”‚
â”‚                          Next.js 12                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Railway (Backend API)                           â”‚
â”‚           https://phoca-master-production.up.railway.app            â”‚
â”‚                         NestJS + TypeScript                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚                    â”‚
           â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Supabase      â”‚  â”‚  Cloudflare R2  â”‚  â”‚   Replicate     â”‚
â”‚   (Database)    â”‚  â”‚  (Image Storage)â”‚  â”‚   (AI API)      â”‚
â”‚   PostgreSQL    â”‚  â”‚   S3 í˜¸í™˜       â”‚  â”‚   ê°ì²´ì¸ì‹/ê·¸ë¦¼  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚  Google Cloud   â”‚
                                          â”‚  Translation    â”‚
                                          â”‚   (ë²ˆì—­ API)    â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„œë¹„ìŠ¤ë³„ ì—­í•  ìš”ì•½

| ì„œë¹„ìŠ¤ | ì—­í•  | ì„¤ëª… |
|--------|------|------|
| **Cloudflare Pages** | í”„ë¡ íŠ¸ì—”ë“œ í˜¸ìŠ¤íŒ… | Next.js ì›¹ì•±ì„ ì „ ì„¸ê³„ CDNìœ¼ë¡œ ë°°í¬ |
| **Railway** | ë°±ì—”ë“œ API ì„œë²„ | NestJS ì„œë²„ë¡œ ì¸ì¦, CRUD, AI í˜¸ì¶œ ë“± ëª¨ë“  ë°±ì—”ë“œ ë¡œì§ ì²˜ë¦¬ |
| **Supabase** | ë°ì´í„°ë² ì´ìŠ¤ | PostgreSQL DBë¡œ ì‚¬ìš©ì, ë‹¨ì–´ì¥, ë‹¨ì–´, ë¶ë§ˆí¬, í€´ì¦ˆ ê¸°ë¡ ì €ì¥ |
| **Cloudflare R2** | ì´ë¯¸ì§€ ì €ì¥ì†Œ | S3 í˜¸í™˜ ìŠ¤í† ë¦¬ì§€ë¡œ ì‚¬ìš©ì ì—…ë¡œë“œ ì´ë¯¸ì§€, AI ì¸ì‹ ì´ë¯¸ì§€ ì €ì¥ |
| **Replicate** | AI ëª¨ë¸ API | ì´ë¯¸ì§€ì—ì„œ ê°ì²´ ì¸ì‹(YOLO), ê·¸ë¦¼ ë¶„ì„(CLIP) |
| **Google Translate** | ë²ˆì—­ API | ì¸ì‹ëœ ì˜ì–´ ë‹¨ì–´ë¥¼ í•œêµ­ì–´ë¡œ ìë™ ë²ˆì—­ |

### ë°ì´í„° íë¦„ (ì‚¬ì§„ìœ¼ë¡œ ë‹¨ì–´ì¥ ë§Œë“¤ê¸°)
```
ì‚¬ìš©ì ì‚¬ì§„ ì—…ë¡œë“œ â†’ Cloudflare R2ì— ì €ì¥
                  â†’ Replicate AIê°€ ê°ì²´ ì¸ì‹
                  â†’ Google Translateë¡œ ë²ˆì—­
                  â†’ Supabase DBì— ë‹¨ì–´ ì €ì¥
```

---

## ì„œë¹„ìŠ¤ë³„ ìƒì„¸ ì •ë³´

### 1. Cloudflare Pages (Frontend)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | í”„ë¡ íŠ¸ì—”ë“œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í˜¸ìŠ¤íŒ… |
| **ê¸°ìˆ ** | Next.js 12, React 18, TypeScript |
| **URL** | `https://phoca-master.pages.dev` (ë°°í¬ ì™„ë£Œ ì‹œ) |
| **ë¹„ìš©** | ë¬´ë£Œ (ë¬´ì œí•œ ìš”ì²­) |
| **ê¸°ëŠ¥** | - ì •ì  ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…<br>- CDN ê¸€ë¡œë²Œ ë°°í¬<br>- HTTPS ìë™ ì œê³µ |

### 2. Railway (Backend API)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | ë°±ì—”ë“œ REST API ì„œë²„ |
| **ê¸°ìˆ ** | NestJS, TypeScript, TypeORM |
| **URL** | `https://phoca-master-production.up.railway.app` |
| **ë¹„ìš©** | ë¬´ë£Œ~$5/ì›” (500ì‹œê°„/ì›” ë¬´ë£Œ) |
| **ê¸°ëŠ¥** | - ì‚¬ìš©ì ì¸ì¦ (JWT)<br>- ë‹¨ì–´/ë‹¨ì–´ì¥ CRUD<br>- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬<br>- AI API í˜¸ì¶œ<br>- ì´ë©”ì¼ ë°œì†¡ |

### 3. Supabase (Database)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ |
| **Host** | `db.rdtvutjqtygrusulkfok.supabase.co` |
| **ë¹„ìš©** | ë¬´ë£Œ (500MB DB, 1GB Storage) |
| **ì €ì¥ ë°ì´í„°** | - ì‚¬ìš©ì ì •ë³´ (Users)<br>- ë‹¨ì–´ì¥ (Wordbook)<br>- ë‹¨ì–´ (Word)<br>- ë¶ë§ˆí¬ (Bookmark)<br>- í€´ì¦ˆ ê¸°ë¡ (Quiz) |

### 4. Cloudflare R2 (Image Storage)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥ì†Œ (S3 í˜¸í™˜) |
| **ë²„í‚·** | `vocapic-images` |
| **Public URL** | `https://pub-2b336b019958442583369863e931a947.r2.dev` |
| **ë¹„ìš©** | ë¬´ë£Œ (10GB/ì›”) |
| **ì €ì¥ íŒŒì¼** | - ì‚¬ìš©ì ì—…ë¡œë“œ ì´ë¯¸ì§€<br>- AI ì¸ì‹ëœ ê°ì²´ ì´ë¯¸ì§€<br>- í”„ë¡œí•„ ì´ë¯¸ì§€ |

### 5. Replicate (AI API)
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | AI ëª¨ë¸ API ì œê³µ |
| **API Token** | `r8_TMoOp...` (ì¼ë¶€ ê°€ë¦¼) |
| **ë¹„ìš©** | ë¬´ë£Œ í¬ë ˆë”§ $5 â†’ ì¢…ëŸ‰ì œ |
| **ê¸°ëŠ¥** | - **ê°ì²´ ì¸ì‹**: ì´ë¯¸ì§€ì—ì„œ ë¬¼ì²´ ê°ì§€ (YOLO/DETR)<br>- **ê·¸ë¦¼ ì¸ì‹**: ì‚¬ìš©ìê°€ ê·¸ë¦° ê·¸ë¦¼ ë¶„ë¥˜ (CLIP) |

### 6. Google Cloud Translation
| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | ì˜ì–´â†’í•œêµ­ì–´ ìë™ ë²ˆì—­ |
| **Project ID** | `vocapic-480015` |
| **ë¹„ìš©** | ë¬´ë£Œ (50ë§Œ ê¸€ì/ì›”) |
| **ê¸°ëŠ¥** | - ê°ì§€ëœ ì˜ì–´ ë‹¨ì–´ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­<br>- Cloud Translation API v2 |

---

## í™˜ê²½ ë³€ìˆ˜ ì •ë¦¬

### Backend (Railway)
```env
# Database (Supabase)
DB_HOST=db.xxxxxxxxxxxx.supabase.co
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=your-password
DB_NAME=postgres

# JWT
JWT_SECRET_KEY=your-super-secret-jwt-key-minimum-32-characters
JWT_EXPIRESIN=7d

# Cloudflare R2
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_BUCKET_NAME=your-bucket-name
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev

# Replicate AI
REPLICATE_API_TOKEN=r8_xxxxxxxxxxxx

# Google Translate
client_email=your-service-account@project-id.iam.gserviceaccount.com
private_key="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
projectId=your-project-id

# Email (ì„ íƒ)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
```

### Frontend (Cloudflare Pages)
```env
NEXT_PUBLIC_SERVER_URL=https://phoca-master-production.up.railway.app
NEXT_PUBLIC_IMAGE_URL=https://pub-2b336b019958442583369863e931a947.r2.dev/
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ë‹¨ì–´ì¥ ë§Œë“¤ê¸°
1. ì‚¬ìš©ìê°€ ì‚¬ì§„ ì—…ë¡œë“œ
2. Replicate AIê°€ ê°ì²´ ì¸ì‹
3. Google Translateë¡œ í•œêµ­ì–´ ë²ˆì—­
4. ë‹¨ì–´ì¥ì— ì €ì¥ (Supabase)
5. ì´ë¯¸ì§€ëŠ” R2ì— ì €ì¥

### 2. ì¹´ë“œ ë§¤ì¹­ ê²Œì„
- ì˜ì–´ ë‹¨ì–´ì™€ ì´ë¯¸ì§€ë¥¼ ë§¤ì¹­í•˜ëŠ” ë©”ëª¨ë¦¬ ê²Œì„
- ë‹¨ì–´ì¥ì—ì„œ 8ê°œ ë‹¨ì–´ ëœë¤ ì„ íƒ

### 3. ê·¸ë¦¼ ê·¸ë¦¬ê¸° í€´ì¦ˆ
1. ëœë¤ ì˜ì–´ ë‹¨ì–´ ì œì‹œ
2. ì‚¬ìš©ìê°€ ê·¸ë¦¼ ê·¸ë¦¬ê¸°
3. Replicate AIê°€ ê·¸ë¦¼ ë¶„ì„
4. ì •ë‹µ ì—¬ë¶€ íŒì •

### 4. ê³µê°œ ë‹¨ì–´ì¥ íƒìƒ‰
- ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ê³µê°œ ë‹¨ì–´ì¥ ê²€ìƒ‰
- ë¶ë§ˆí¬ ê¸°ëŠ¥

---

## ë°°í¬ ìƒíƒœhttps://phoca-master.pages.dev/

| ì„œë¹„ìŠ¤ | ìƒíƒœ | URL |
|--------|------|-----|
| Supabase DB | âœ… ì™„ë£Œ | `db.rdtvutjqtygrusulkfok.supabase.co` |
| Cloudflare R2 | âœ… ì™„ë£Œ | `https://pub-2b336b019958442583369863e931a947.r2.dev` |
| Replicate AI | âœ… ì™„ë£Œ | API í† í° ì„¤ì • ì™„ë£Œ |
| Google Translate | âœ… ì™„ë£Œ | ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± ì™„ë£Œ |
| Railway Backend | âœ… ì™„ë£Œ | `https://phoca-master-production.up.railway.app` |
| Cloudflare Pages | ğŸ”„ ì§„í–‰ì¤‘ | ë¹Œë“œ ì„¤ì • ì¡°ì • í•„ìš” |
##í™ˆí˜ì´ì§€ https://phoca-master.pages.dev/
---

## ì˜ˆìƒ ì›” ë¹„ìš©

| ì„œë¹„ìŠ¤ | ë¬´ë£Œ í•œë„ | ì˜ˆìƒ ë¹„ìš© |
|--------|----------|----------|
| Supabase | 500MB DB | ë¬´ë£Œ |
| Cloudflare R2 | 10GB Storage | ë¬´ë£Œ |
| Cloudflare Pages | ë¬´ì œí•œ | ë¬´ë£Œ |
| Railway | 500ì‹œê°„/ì›” | ë¬´ë£Œ~$5 |
| Replicate | $5 í¬ë ˆë”§ | ì¢…ëŸ‰ì œ |
| Google Translate | 50ë§Œ ê¸€ì | ë¬´ë£Œ |
| **ì´í•©** | - | **ë¬´ë£Œ ~ $5/ì›”** |

---

## GitHub Repository

**URL**: https://github.com/globalkitabiz/Phoca-master

### ë¸Œëœì¹˜
- `main`: ë°°í¬ìš© ë©”ì¸ ë¸Œëœì¹˜

### ì£¼ìš” ì»¤ë°‹
1. Initial commit: Vocapic with Cloudflare R2
2. Add nixpacks.toml for Railway deployment
3. Fix TypeScript errors
4. Configure Next.js for Cloudflare Pages

---

## ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

### Backend
```bash
cd back
cp .env.example .dev.env
# .dev.env íŒŒì¼ì— í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
npm install
npm run start:dev
```

### Frontend
```bash
cd front
cp .env.example .env.local
# .env.local íŒŒì¼ì— í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
npm install
npm run dev
```

---

## ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### Backend 500 ì—ëŸ¬
1. Railway ë¡œê·¸ í™•ì¸
2. í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½ í™•ì¸
3. DB ì—°ê²° í™•ì¸

### ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨
1. R2 API í† í° ê¶Œí•œ í™•ì¸
2. CORS ì„¤ì • í™•ì¸
3. R2 Public URL í™•ì¸

### AI ì¸ì‹ ì‹¤íŒ¨
1. Replicate API í† í° í™•ì¸
2. í¬ë ˆë”§ ì”ì•¡ í™•ì¸

### ë²ˆì—­ ì‹¤íŒ¨
1. Google Cloud ì„œë¹„ìŠ¤ ê³„ì • í™•ì¸
2. Translation API í™œì„±í™” í™•ì¸
3. private_key í˜•ì‹ í™•ì¸ (ì¤„ë°”ê¿ˆ `\n` í¬í•¨)

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-12-03*
